<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>solr</title>
    <link rel="stylesheet" href="./img/style.css">
    <link rel="stylesheet" href="./img/swiper.min.css">

    <link rel="stylesheet" type="text/css" href="./css/easyui.css">
    <link rel="stylesheet" type="text/css" href="./css/icon.css">
    <link rel="stylesheet" type="text/css" href="./css/demo.css">
</head>
<body>
<!-- 顶部搜索	 - start -->
<div class="header">
    <div class="head">
        <div class="logo"><a href="#"><img src="./img/logo.png" width="100%" alt=""></a></div>
        <form action="/list.html" class="formBox">
            <input type="text" class="inputSeach" id="inputSeach" name="keywords">
            <input type="submit" value="搜索一下" class="inputSub">
            <div class="recommend">
                <div class="item">美团</div>
                <div class="item">百度外卖</div>
                <div class="item">美团</div>
                <div class="item">百度外卖</div>
            </div>
        </form>
    </div>
</div>

<!-- 顶部搜索	 - end -->

<div class="contentBox">
    <!-- 中间左边区域 - start -->
    <div class="contener_l">
        <div class="count">
            <div class="showTool">
                <div class="toolBox">搜索引擎为您找到相关结果约<span id="souid">17,800,000</span>条 <span class="tool">搜索工具</span></div>
                <div class="toolBox">

                    从:<input class="easyui-datetimebox" style="height: 25px ; width: 100px" name="startDate"/>
                    至:<input class="easyui-datetimebox" style="height: 25px ; width: 100px" name="endDate"/>
                    <input type="button" onclick="ajaxQuery()" value="确定">

                    <input name="editor" placeholder="请输入编辑" onkeypress="ajaxQuery()"
                           style="height: 15px ; width: 100px"/>
                    <input name="source" placeholder="请输入来源" onkeypress="ajaxQuery()"
                           style="height: 15px ; width: 100px"/>
                    <span class="tool openTool">收起工具</span>
                </div>

            </div>
        </div>
        <div class="advItem">
            <div class="item">
                <div class="title"><img src="./img/logo.png" width="30px" height="30px" class="logo" alt=""><a
                        href="#"></a>Test教育科技股份有限公司 <span>官网</span></div>
                <div class="contentInfo_src">
                    <a href="#"><img src="./img/item.jpeg" alt="" class="imgSrc" width="121px" height="75px"></a>
                    <div class="infoBox">
                        <p class="describe">
                            大数据学习已然成为时代所趋，相较于目前市面上的书籍及学习视频，大数据培训更适用于对大数据感兴趣的人群，通过培训老师丰富的大数据实战经验分享，
                            能在大数据初期学习中，少走很多弯路，后期的项目实战，结合企业及时下大数据热门应用，可快速接轨大数据发展方向。
                        </p>
                        <p><a class="showurl" href="www.itcast.cn">www.itcast.cn 2018-08</a> <span class="lab"><a
                                href="">快照 - </a><a href="">品牌广告</a></span></p>
                    </div>
                </div>
                <div class="advTable">
                    <div class="lab">
                        <div class="on">Test</div>
                        <div>Test</div>
                        <div>Test</div>
                        <div>Test</div>
                        <div>Test</div>
                        <div>Test</div>
                    </div>
                    <div class="cont">
                        <div class="items">
                            <img src="./img/item.jpeg" alt="">
                            <div class="itemsInfo">
                                <div class="tit">北京Test教育科技股份有限公司一</div>
                                <ul>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                </ul>
                            </div>
                            <div class="clear"></div>
                            <div class="listTit">
                                <a href="">
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                </a>
                            </div>
                        </div>
                        <div class="items">

                            <img src="./img/item.jpeg" alt="">
                            <div class="itemsInfo">
                                <div class="tit">北京Test教育科技股份有限公司二</div>
                                <ul>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                </ul>
                            </div>
                            <div class="clear"></div>
                            <div class="listTit">
                                <a href="">
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                </a>
                            </div>
                        </div>
                        <div class="items">

                            <img src="./img/item.jpeg" alt="">
                            <div class="itemsInfo">
                                <div class="tit">北京Test教育科技股份有限公司三</div>
                                <ul>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                </ul>
                            </div>
                            <div class="clear"></div>
                            <div class="listTit">
                                <a href="">
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                </a>
                            </div>
                        </div>
                        <div class="items">

                            <img src="./img/item.jpeg" alt="">
                            <div class="itemsInfo">
                                <div class="tit">北京Test教育科技股份有限公司四</div>
                                <ul>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                </ul>
                            </div>
                            <div class="clear"></div>
                            <div class="listTit">
                                <a href="">
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                </a>
                            </div>
                        </div>
                        <div class="items">

                            <img src="./img/item.jpeg" alt="">
                            <div class="itemsInfo">
                                <div class="tit">北京Test教育科技股份有限公司五</div>
                                <ul>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                </ul>
                            </div>
                            <div class="clear"></div>
                            <div class="listTit">
                                <a href="">
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                </a>
                            </div>
                        </div>
                        <div class="items">

                            <img src="./img/item.jpeg" alt="">
                            <div class="itemsInfo">
                                <div class="tit">北京Test教育科技股份有限公司六</div>
                                <ul>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                    <li><a href="#">Test</a></li>
                                </ul>
                            </div>
                            <div class="clear"></div>
                            <div class="listTit">
                                <a href="">
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                    <div>Test</div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="itemList">

            <div class="item">
                <div class="title"><a href="#">北京Test教育科技股份有限公司</a></div>
                <div class="contentInfo_src">
                    <a href="#"><img src="./img/item.jpeg" alt="" class="imgSrc" width="121px" height="75px"></a>
                    <div class="infoBox">
                        <p class="describe">
                            大数据学习已然成为时代所趋，相较于目前市面上的书籍及学习视频，大数据培训更适用于对大数据感兴趣的人群，通过培训老师丰富的大数据实战经验分享，
                            能在大数据初期学习中，少走很多弯路，后期的项目实战，结合企业及时下大数据热门应用，可快速接轨大数据发展方向。
                        </p>
                        <p><a class="showurl" href="www.itcast.cn">www.itcast.cn 2018-08</a> <span class="lab">隔壁老王 - 网易新闻</span>
                        </p>
                    </div>
                </div>
            </div>


        </div>

        <div class="relevant">
            <div class="title">
                相关搜索
            </div>
            <div>
                <a href="#">仪表Test器</a>
                <a href="#">Test</a>
                <a href="#">asp是什么语言</a>
                <a href="#">上海雷迅am2-40价格</a>
                <a href="#">上海雷迅销售电话</a>
                <a href="#">上海雷迅Testak-mg</a>
                <a href="#">aspl</a>
                <a href="#">pdm箱</a>
                <a href="#">pdm配电单元</a>
            </div>
        </div>

        <div class="pageList">

        </div>
    </div>

    <!-- 中间左边区域 - end -->

    <!-- 中间右边区域 - start -->

    <div class="contener_r">
        <div class="advert">
            <div class="title">国科简提供区块链系统</div>
            <div class="ban_swiper">
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide"><img src="./img/adv1.jpeg" alt=""></div>
                        <div class="swiper-slide"><img src="./img/adv2.jpeg" alt=""></div>
                        <div class="swiper-slide"><img src="./img/adv1.jpeg" alt=""></div>
                        <div class="swiper-slide"><img src="./img/adv2.jpeg" alt=""></div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            <div class="des">
                星域云 开创了全球领先的共享计算生态,以共享模式和区块链技术收集海量计算资源,将百万节点资源整合,开放给广大互联网企业,实现更高性价比,更易扩展,更环保的计算方式.
            </div>
            <div class="showUrl"><a href="#">国科简（北京）科技有限公司</a> <span>品牌广告</span></div>
        </div>

        <div class="hotSeach">
            <div class="title">搜索热点
                <div class="pageListes">
                    <a href=""> < </a>
                    <a href="" class="on"> <span></span></a>
                    <a href=""> <span></span></a>
                    <a href=""> <span></span></a>
                    <a href="" class="go"> ></a></div>
            </div>
            <div class="seachItem">
                <div class="topLab">排名 <span>搜索指数</span></div>
                <li class="A"><a href=""><span>1</span>新闻联播 下等人 <span>1345<em></em></span></a></li>
                <li class="B"><a href=""><span>2</span>新闻联播 下等人 <span>1345<em></em></span></a></li>
                <li class="C"><a href=""><span>3</span>新闻联播 下等人 <span>1345<em></em></span></a></li>
                <li><a href=""><span>4</span>新闻联播 下等人 <span>1345<em></em></span></a></li>
                <li><a href=""><span>5</span>新闻联播 下等人 <span>1345<em></em></span></a></li>
                <li><a href=""><span>6</span>新闻联播 下等人 <span>1345<em class="add"></em></span></a></li>
                <li><a href=""><span>7</span>新闻联播 下等人 <span>1345<em></em></span></a></li>
                <li><a href=""><span>8</span>新闻联播 下等人 <span>1345<em></em></span></a></li>
                <li><a href=""><span>9</span>新闻联播 下等人 <span>1345<em class="add"></em></span></a></li>
                <li><a href=""><span>10</span>新闻联播 下等人 <span>1345<em></em></span></a></li>
                <div class="source"> 数据来源 百度数据库</div>
            </div>
        </div>
    </div>

    <!-- 中间右边区域 - end -->

</div>
<script src="./img/swiper.min.js"></script>
<script src="./img/jquery.min.js"></script>
<script src="./img/jquery.easyui.min.js"></script>
<script>

    var swiper = new Swiper('.swiper-container', {
        spaceBetween: 30,
        pagination: {
            el: '.swiper-pagination',
            clickable: true
        },
        autoplay: true
    });
    var swiper = new Swiper('.swiper-hot-container', {
        spaceBetween: 30,
        pagination: {
            el: '.swiper-pagination',
            clickable: true
        },
        autoplay: true
    });

    $('.tool').click(function () {
        if ($('.showTool').hasClass('act')) {
            $('.showTool').removeClass('act')
        } else {
            $('.showTool').addClass('act')
        }
    })

    $('.inputSeach').focus(function () {
        $('.recommend').css({display: 'block'})
    })
    $('.inputSeach').blur(function () {
        setTimeout(function () {
            $('.recommend').css({display: 'none'})
        }, 100)
    })
    $('.recommend .item').click(function () {
        $('.inputSeach').val($(this).text())
        $('.recommend').css({display: 'none'})
    })

    var tabInd = 0;
    var time = ''

    $('.advTable .lab div').hover(function () {
        clearInterval(time)
        tabInd = $(this).index();
        tabSwitch(tabInd)
    }, function () {
        time = setInterval(automaticSwitch, 3000)
    })

    function tabSwitch(obj) {
        $('.advTable .lab div').eq(obj).addClass('on').siblings().removeClass('on')
        tabInd = obj
        $('.advTable .cont .items').eq(tabInd).show().siblings().hide()
    }

    function automaticSwitch() {
        tabInd++
        if (tabInd >= $('.advTable .lab div').length) {
            tabInd = 0;
        }
        tabSwitch(tabInd)
    }

    time = setInterval(automaticSwitch, 3000)


</script>


<script>

    //获取url中的关键词
    var keywords = window.location.search;

    var split = keywords.split("=")[1];

    if (split == null || split == "") {
        window.location.href = "index.html";
    }
    //对关键词进行解码
    var kv = decodeURI(split);
    //alert(kv)

    //将搜索关键字显示在输入框中
    $("#inputSeach").val(kv);


    ajaxQuery(1, 15);

    function ajaxQuery(page, pageSize) {

        //条件查询
        var startDate = $("[name=startDate]").val();
        var endDate = $("[name=endDate]").val();
        var editor = $("[name=editor]").val();
        var source = $("[name=source]").val();


        //清空上次的列表数据
        $(".itemList").html("");

        //获取搜索关键字
        var keywords = $("#inputSeach").val();


        $.ajax({
            type: "POST",
            url: "/news/pagequery.action",
            data: {
                "keywords": keywords,
                "startDate": startDate,
                "endDate": endDate,
                "editor": editor,
                "source": source,
                "pageBean.page": page,
                "pageBean.pageSize": pageSize
            },
            dataType: "json",
            success: function (data) {

                $("#souid").text(data.pageCounts);

                //没有数据跳转到首页
                if (data == null || data == "") {
                    window.location.href = "/index.html";
                    return;
                }

                $(data.newsList).each(function () {
                    //获取新闻的url
                    var docurl = this.docurl;
                    var strurl = this.docurl;
                    //如果新闻url比较长，进行截取显示
                    if (strurl.length > 30) {
                        strurl = strurl.substring(0, 29) + "...";
                    }


                    //构造一条新闻的html片段
                    var html = "<div class=\"item\">\n" +
                        "    <div class=\"title\"><a href='" + docurl + "'>" + this.title + "</a></div>\n" +
                        "    <div class=\"contentInfo_src\">\n" +
                        "        <a href=\"#\"><img src=\"./img/item.jpeg\" alt=\"\" class=\"imgSrc\" width=\"121px\" height=\"75px\"></a>\n" +
                        "        <div class=\"infoBox\">\n" +
                        "            <p class=\"describe\">\n" + this.time + " - " + this.content +
                        "            </p>" +
                        "            <p><a class=\"showurl\" href='" + docurl + "'>" + strurl + " </a> <span class='lab'><a" +
                        "                    href=\"\">" + this.source + "  " + this.editor + " - </a></span></p>\n" +
                        "        </div>" +
                        "    </div>" +
                        "</div>"

                    $(".itemList").append(html);



                    //先清空分页栏,再进行追加分页栏
                    $(".pageList").html(pageStr);
                    //需要处理分页工具条
                    var pageStr = "<ul>";
                    // 1.1 上一页 :

                    if (data.page > 1) {//当前页大于1，才显示上一页
                        //如何禁用掉某一个元素的属性呢? js:javascript:void(0)
                        pageStr += "<li><a href='javascript:void(0)' onclick='ajaxQuery(" + (data.page - 1) + ",15)'>< </a></li>";
                    }



                    //1.2 分页码数: 展示七个条码
                    //如果总页数就7个:展示全部页码
                    if (data.pageNumber <= 7) {
                        //直接展示所有的页数
                        for (var i = 1; i <= data.pageNumber; i++) {
                            if (data.page == i) {
                                pageStr += "<li class='on'>" + i + "</li>";
                            } else {
                                pageStr += "<li><a href='javascript:void(0)' onclick='ajaxQuery(" + i + ",15)' >" + i + "</a></li>"
                            }

                        }

                    } else {
                        //总页数大于7
                        // 如果用户: 当前页 <= 4 ,显示前7页数据，起始页=1，结束页=7
                        if(data.page <=4){
                            for(var i = 1 ; i<=7 ; i++){
                                if (data.page == i) {
                                    pageStr += "<li class='on'>" + i + "</li>";
                                } else {
                                    pageStr += "<li><a href='javascript:void(0)' onclick='ajaxQuery(" + i + ",15)' >" + i + "</a></li>"
                                }
                            }
                        }else if(data.page > (data.pageNumber - 3 ) ){
                            //如果当前页  >   ( 总页数 - 3 )
                            for(var i = data.pageNumber-6 ; i<= data.pageNumber ; i++){
                                if (data.page == i) {
                                    pageStr += "<li class='on'>" + i + "</li>";
                                } else {
                                    pageStr += "<li><a href='javascript:void(0)' onclick='ajaxQuery(" + i + ",15)' >" + i + "</a></li>"
                                }
                            }


                        }else {
                            //正常情况，起始页：当前页+3     结束页：当前页-3
                            for(var i =data.page-3 ; i<= data.page+3 ; i++ ){

                                if (data.page == i) {
                                    pageStr += "<li class='on'>" + i + "</li>";
                                } else {
                                    pageStr += "<li><a href='javascript:void(0)' onclick='ajaxQuery(" + i + ",15)' >" + i + "</a></li>"
                                }

                            }
                        }


                    }


                    //1.3 下一页: 当前页小于总页码，显示下一页
                    if (data.page < data.pageNumber) {
                        pageStr += "<li><a href='javascript:void(0)' onclick='ajaxQuery(" + (data.page + 1) + ",15)'>></a></li>";
                    }

                    pageStr += "</ul>";

                    //将分页条追加到页面上
                    $(".pageList").html(pageStr);
                })

            }
        })

    }

</script>


</body>

</html>